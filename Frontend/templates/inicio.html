{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'IMG/Uninova.ico' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uni-nova</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="{% static 'CSS/inicio.css' %}">
</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 d-none d-md-block sidebar">
                <div class="sidebar-sticky">
                    <a href="{% url 'inicio' %}" class="logo">
                        <div class="LOGO">
                            <img src="{% static 'IMG/LOGOUNINOVA.png' %}" alt="Logo" class="logo img-flid mb-4" id="Logo">
                        </div>

                    </a>
                    <ul class="nav flex-column" id="nav_accordion">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'inicio' %}">
                                <i class='bx bxs-home'></i>
                                Inicio
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class='bx bx-search'></i>
                                Buscar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class='bx bx-bookmark'></i>
                                Guardados
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'ver_perfil' request.user.username %}">
                                <i class='bx bxs-user'></i>
                                Ver perfil
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class='bx bx-cog'></i>
                                Ajustes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class='bx bx-upload'></i>
                                Nueva Publicaci贸n
                            </a>
                        </li>
                    </ul>
                    <div class="usuario mt-4">
                        <div class="imagen_user">
                            {% if user_profile.foto_perfil %}
                            <img src="{{ user_profile.foto_perfil.url }}" alt="Foto de perfil" class="img-fluid rounded-circle">
                            {% else %}
                            <img src="{% static 'IMG/Defaultuser.png' %}" class="img-fluid rounded-circle">
                            {% endif %}
                        </div>
                        <div class="usuario-info">
                            <p>{{ request.user.username }}</p>
                        </div>
                    </div>
                    <div class="cerrarsesion mt-4">
                        <a href="{% url 'cerrar_sesion' %}" class="btn btn-block">
                            <i class='bx bx-log-out'></i>
                            Cerrar sesi贸n
                        </a>
                    </div>
                </div>
            </nav>

            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
                <h1 class="h2">Proyectos</h1>
                {% if proyectos %}
                {% for proyecto in proyectos %}
                <div class="publicacion card mb-4">
                    <div class="card-body">
                        <h2 class="card-title">{{ proyecto.nombre_proyecto }}</h2>
                        <b><p class="card-text">{{ proyecto.creador.username }}</p></b>
                        <p class="card-text">Fecha de Creaci贸n: {{ proyecto.fecha_creacion }}</p>
                        <p class="card-text">{{ proyecto.descripcion }}</p>
                        <div class="media">
                            {% if proyecto.imagenes %}
                            <img src="{{ proyecto.imagenes.url }}" alt="Imagen del proyecto" class="img-fluid">
                            {% endif %}
                            {% if proyecto.videos %}
                            <video controls class="mt-3 w-100">
                                <source src="{{ proyecto.videos.url }}" type="video/mp4">
                                El video no se puede reproducir.
                            </video>
                            {% endif %}
                        </div>
                        {% if proyecto.documentacion %}
                        <h3 class="mt-3"><a href="{{ proyecto.documentacion.url }}">Documentaci贸n</a></h3>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
                {% else %}
                <div class="no-proyectos">
                    <p>No hay proyectos disponibles en este momento.</p>
                </div>
                {% endif %}
            </main>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
